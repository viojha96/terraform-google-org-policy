# Copyright 2026 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: blueprints.cloud.google.com/v1alpha1
kind: BlueprintMetadata
metadata:
  name: terraform-google-org-policy-display
  annotations:
    config.kubernetes.io/local-config: "true"
spec:
  info:
    title: Google Cloud Organization Policy v2 Terraform Module
    source:
      repo: https://github.com/terraform-google-modules/terraform-google-org-policy.git
  ui:
    input:
      variables:
        constraint:
          name: constraint
          title: Constraint Name
          regexValidation: ^constraints\/[a-zA-Z0-9._]+$
          validation: Must be in the format constraints/service.constraintName.
          subtext: The constraint to be applied (e.g., constraints/service.someConstraint).
          level: 1
        exclude_folders:
          name: exclude_folders
          title: Exclude Folders
          subtext: Set of folder IDs to exclude from the policy (e.g., ["123456789", "987654321"])
        exclude_projects:
          name: exclude_projects
          title: Exclude Projects
          subtext: Set of project IDs to exclude from the policy (e.g., ["my-project-id", "another-project"])
        inherit_from_parent:
          name: inherit_from_parent
          title: Inherit From Parent
          subtext: Determines the inheritance behavior for this policy (only supported on list constraints).
          enumValueLabels:
            - label: "False"
              value: "false"
            - label: "True"
              value: "true"
        policy_root:
          name: policy_root
          title: Policy Root Type
          subtext: "Resource hierarchy node to apply the policy to: organization, folder, or project."
          enumValueLabels:
            - label: Organization
              value: organization
            - label: Folder
              value: folder
            - label: Project
              value: project
          altDefaults:
            - type: ALTERNATE_TYPE_DC
              value: organization
        policy_root_id:
          name: policy_root_id
          title: Policy Root ID
          regexValidation: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
          validation: Must be a valid GCP resource ID (e.g., project-id, folder-id, org-id).
          subtext: The ID of the organization, folder, or project.
          level: 1
        policy_type:
          name: policy_type
          title: Policy Type
          subtext: The type of constraint (boolean or list).
          enumValueLabels:
            - label: List
              value: list
            - label: Boolean
              value: boolean
          altDefaults:
            - type: ALTERNATE_TYPE_DC
              value: list
        rules:
          name: rules
          title: Policy Rules
          subtext: List of rules for the policy. Refer to module documentation for the exact structure.
          level: 1
    runtime:
      outputs:
        constraint:
          visibility: VISIBILITY_ROOT
        policy_root:
          visibility: VISIBILITY_ROOT
        policy_root_id:
          visibility: VISIBILITY_ROOT
